CREATE DATABASE IF NOT EXISTS spotstourDB;
USE spotstourDB;

create table continent(continentId Int Auto_Increment primary key not null,
continentName varchar(15) not null);

create table report_Type(rtId Int Auto_Increment primary key not null,
reportType varchar(20) not null);

create table place_Type(placeTypeId Int Auto_Increment primary key not null,
placeType varchar(20) not null);

create table params(type varchar(5) primary key not null,
typeName varchar(10) not null);

create table member_perm(mPid Int primary key not null,
mPermissions varchar(10) not null);

create table ord_stat(oSid Int Auto_Increment primary key not null,
ordStat varchar(10) not null);

create table receipt_Type(receiptTypeId Int Auto_Increment primary key not null,
receiptType varchar(15) not null);

create table ship_Type(shipTypeId Int Auto_Increment primary key not null,
shipType varchar(15) not null);

create table item_type(itId Int Auto_Increment primary key not null,
itemType varchar(10) not null);

create table country(countryId Int Auto_Increment primary key not null,
countryName varchar(20) not null,
continentId Int not null,
constraint country_continentId_fk foreign key(continentId) references continent(continentId));

create table city(cityId Int Auto_Increment primary key not null,
cityName varchar(20) not null,
countryId Int not null,
constraint city_countryId_fk foreign key(countryId) references country(countryId));

create table member(mId Int Auto_Increment primary key not null,
mAN varchar(15) not null,
mPw varchar(15) not null,
mGender varchar(10) not null,
mName varchar(10) not null,
mUid varchar(10) not null,
mBDay datetime not null,
mEmail varchar(30) not null,
mPhone varchar(10) not null,
d_mAddress varchar(40) not null,
m_createTime datetime not null,
mPic varchar(10000),
m_verify tinyint default 0 not null,
mPid Int not null,
constraint member_mPid_fk foreign key(mPid) references member_perm(mPid));

create table portfolio(portfolioId Int Auto_Increment primary key not null,
portfolioName varchar(50) not null,
portfolioText varchar(255) not null,
p_createTime datetime not null,
pAddress varchar(40) not null,
longitude varchar(10) not null,
latitude varchar(10) not null,
cityId Int not null,
mId Int not null,
placeTypeId Int not null,
constraint portfolio_cityId_fk foreign key(cityId) references city(cityId),
constraint portfolio_mId_fk foreign key(mId) references member(mId),
constraint portfolio_placeTypeId_fk foreign key(placeTypeId) references place_Type(placeTypeId));

create table record(recordId Int Auto_Increment primary key not null,
portfolioId Int not null,
type varchar(5) not null,
constraint record_portfolioId_fk foreign key(portfolioId) references portfolio(portfolioId),
constraint record_type_fk foreign key(type) references params(type));

create table video(videoId Int Auto_Increment primary key not null,
videoFile varchar(100) not null,
videoPic varchar(20000) not null,
v_freeze tinyint default 0 not null,
portfolioId Int not null,
constraint video_portfolioId_fk foreign key(portfolioId) references portfolio(portfolioId));

create table video_Report(reportId Int Auto_Increment primary key not null,
reportText varchar(100) not null,
rtId Int not null,
videoId Int not null,
constraint video_Report_videoId_fk foreign key(videoId) references video(videoId),
constraint video_Report_rtId_fk foreign key(rtId) references report_Type(rtId));

create table watch_times(viewsId Int Auto_Increment primary key not null,
portfolioId Int not null,
wt_createTime datetime not null,
constraint watch_times_portfolioId_fk foreign key(portfolioId) references portfolio(portfolioId));

create table portfolioMsg(portfolioMsgId Int Auto_Increment primary key not null,
portfolioId Int not null,
msgText varchar(200) not null,
pm_createTime datetime not null,
pmsg_freeze tinyint default 0 not null,
constraint portfolioMsg_portfolioId_fk foreign key(portfolioId) references portfolio(portfolioId));

create table item(itemId Int Auto_Increment primary key not null,
itemHeader varchar(40) not null,
itemPrice Int not null,
itemQty Int not null,
itemDes varchar(100) not null,
itId Int not null,
itemPic1 varchar(7000),
itemPic2 varchar(7000),
itemPic3 varchar(7000),
countryId Int not null,
constraint item_itId_fk foreign key(itId) references item_type(itId),
constraint item_countryId_fk foreign key(countryId) references country(countryId));

create table feedback(feedbackId Int Auto_Increment primary key not null,
feedbackText varchar(100) not null,
f_createTime datetime not null,
fb_freeze tinyint default 0 not null,
itemId Int not null,
constraint feedback_itemId_fk foreign key(itemId) references item(itemId));

create table ord(ord_Id Int Auto_Increment primary key not null,
mId Int not null,
oSid Int not null,
s_createTime datetime not null,
o_createTime datetime not null,
s_mAddress varchar(40) not null,
receiptTypeId Int not null,
shipTypeId Int not null,
constraint ord_mId_fk foreign key(mId) references member(mId),
constraint ord_oSid_fk foreign key(oSid) references ord_stat(oSid),
constraint ord_receiptTypeId_fk foreign key(receiptTypeId) references receipt_Type(receiptTypeId),
constraint ord_shipTypeId_fk foreign key(shipTypeId) references ship_Type(shipTypeId));

create table ord_deatail(ord_dId Int Auto_Increment primary key not null,
ord_Id Int not null,
ordQty Int not null,
itemId Int not null,
constraint ord_deatail_ord_Id_fk foreign key(ord_Id) references ord(ord_Id),
constraint ord_deatail_itemId_fk foreign key(itemId) references item(itemId));

create table shoppingCart(sc_Id Int Auto_Increment primary key not null,
mId Int not null,
itemId Int not null,
s_ordQty Int not null,
constraint shoppingCart_mId_fk foreign key(mId) references member(mId),
constraint shoppingCart_itemId_fk foreign key(itemId) references item(itemId));











